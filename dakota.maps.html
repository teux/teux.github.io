<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="ru-ru" lang="ru-ru">

  <head><meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
    
    <title>Растровые карты</title>
    <meta name="keywords" content="Андрей Коперский, фотоальбом, ">
    <link type="text/css" rel="stylesheet" href="stylesheets/screen_styles.css">
    <link type="text/css" media="screen" rel="stylesheet" href="stylesheets/colorbox.css">
    <script type="text/javascript" src="scripts/jquery.min.js"></script>
    <script type="text/javascript" src="scripts/jquery.colorbox.js"></script>
    <script type="text/javascript" src="scripts/main.js"></script>
    <script type="text/javascript" src="scripts/menu.js"></script>
    <script type="text/javascript" src="arrays/menuent.js"></script>
    <script type="text/javascript" src="scripts/ltoc.js"></script>
    <script type="text/javascript">
			  $(document).ready(function(){
				  $("a[rel='cbgroup']").colorbox({transition:"elastic", speed:"700", current:"фото {current} из {total}", width:"70%"});
				  $("a[rel='slideshow']").colorbox({slideshow:"true", slideshowAuto:"true", slideshowSpeed:"4000", slideshowStart:"Начать показ", slideshowStop:"Остановить показ", current:"фото {current} из {total}", width:"70%"});
			  });
		  </script>
    <script type="text/javascript" src="arrays/ltocent8.js"></script>
    <script type="text/JavaScript">window.pageid = "dakota.maps.html";</script>
    <link rel="Shortcut Icon" type="image/ico" href="images/favicon.ico">
  </head>



  <body onload="if (navigator.appName.indexOf('Microsoft')!=-1) window.jstree.OpenTreeNode(window.pageid);" id="id105TJ0UM0HS">
    <div id="container">
      <div id="branding">
        <h1>
          <a href="http://www.teux.ru">Андрей Коперский — фотографии походов</a>
          <script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4829635 = new Ya.Metrika({id:4829635}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script>
        </h1>
        <p>Фотографии походов, приглашаю в поход</p>
      </div>
      <div id="navigation_main">
        <ul>
          <li class="first">
            <a href="index.html">Походы</a>
          </li>
          <li>
            <a href="river.html" onmouseover="dropdownmenu(this, event, menu2ent , '')" onmouseout="delayhidemenu()">Водные</a>
          </li>
          <li>
            <a href="kola.html" onmouseover="dropdownmenu(this, event, menu3ent , '')" onmouseout="delayhidemenu()">Кольский п-ов</a>
          </li>
          <li>
            <a href="afoot.html" onmouseover="dropdownmenu(this, event, menu4ent , '')" onmouseout="delayhidemenu()">Пешие</a>
          </li>
          <li>
            <a href="skiing.html" onmouseover="dropdownmenu(this, event, menu5ent , '')" onmouseout="delayhidemenu()">Лыжные</a>
          </li>
          <li>
            <a href="auto.html" onmouseover="dropdownmenu(this, event, menu6ent , '')" onmouseout="delayhidemenu()">Автомобильные</a>
          </li>
          <li>
            <a href="camping.html" onmouseover="dropdownmenu(this, event, menu7ent , '')" onmouseout="delayhidemenu()">Прочие</a>
          </li>
          <li class="current">
            <a href="usefull.html" onmouseover="dropdownmenu(this, event, menu8ent , '')" onmouseout="delayhidemenu()">Полезности</a>
          </li>
        </ul>
      </div>
      <div id="tools">
        <h3>Page Tools</h3>
        <ul id="page_tools">
          <li id="search">
            <form method="get" action="http://www.google.com/search" target="_blank">
              <input onfocus="this.className='txt-very-dark-gray'; this.value=''" class="txt-light-gray" id="search_text" type="text" name="q" size="30" maxlength="255" value="Поиск по сайту через Google">
              <input type="hidden" name="sitesearch" value="teux.ru">
              <input id="search_button" type="submit" value="&gt;">
            </form>
          </li>
        </ul>
      </div>
      <div id="dashboard">
        <div id="navigation_secondary">
          <p class="title">Разделы:</p>
          <div id="ltoc">
            <script type="text/JavaScript">window.jstree = new MakeTree(window.TITEMS, false);</script>
          </div>
        </div>
        <script type="text/javascript" src="arrays/lastpub.js"></script>
        <script type="text/javascript" src="arrays/dashboard.js"></script>
      </div>
      <div id="content_main" class="with-info">
        <div id="breadcrumbs">
          <p><span>Расположение: </span><a href="usefull.html">Полезности</a> &gt; <a href="dakota.html">Garmin Dakota 20</a> &gt; <strong>Растровые карты</strong>
          </p>
        </div>
        <h1 class="title topictitle1">Растровые карты</h1>
        <div class="body photoBody">
          <p class="shortdesc">Подготовка и загрузка растровых карт</p>
          <p class="p">Спор между сторонниками растровых и векторных карт
столь же неразрешим, как вопрос о курице и яйце. Dakota делает этот спор
неактуальным, поскольку обе стороны найдут в навигаторе удовлетворение
потребностей.</p>
          <div class="section storySection">
            <h2 class="title sectiontitle">Обновление прошивки навигатора</h2>
            <p class="p">Это первое, что нужно сделать для нового навигатора. Совет актуален
на момент написания статьи (май 2010 г). Вероятно, более поздние
партии Dakota будут поддерживать работу с растровыми картами без
перепрошивки. Хотя обновлять прошивку до последних версий все равно
полезно. Бывает, новые версии исправляют ошибки в работе навигаторов
или добавляют функции. Просто зарегистрируйте свой Dakota на сайте <a class="xref" href="http://my.garmin.com" target="_blank">my.garmin.com</a> и
следуйте инструкциям по обновлению прошивки до последней версии.</p>
            <p class="p">Я немного сомневался перед обновлением прошивки, поскольку допускал исчезновение русификации.
    Ничего подобного не произошло. Новая прошивка оказалась русифицированной, а также добавила
    небольшие полезные функции.</p></div>
          <div class="section storySection">
            <h2 class="title sectiontitle">Привязка карты</h2>
            <p class="p">Растровые карты состоят из пикселей. Каждый из них имеет порядковый
номер по оси X и Y. Навигатор должен знать, с какой координатой
WGS-84 связан тот или иной пиксель. Для этого в отдельном файле
навигатору сообщают координаты нескольких пикселей, а координаты
остальных пикселей навигатор рассчитывает самостоятельно.</p>
            <p class="p">Специальные программы, о которых будет сказано дальше, готовят
карты для загрузки в навигатор и делают процесс привязки простым.
Еще приятнее то, что генштабовские карты уже привязаны к координатной
сетке, и выполнять эту процедуру не требуется. Для каждого листа
генштабовской карты в сопроводительном файле с расширением <samp class="ph codeph">map</samp> указаны
координаты девяти пикселей. Карты с файлами  привязки можно скачать с сайтов <a class="xref" href="http://www.afanas.ru/mapbase/help" target="_blank">www.afanas.ru</a> и <a class="xref" href="http://rusyag.webhop.org/maps/%D0%93%D0%B5%D0%BD%D1%88%D1%82%D0%B0%D0%B1/" target="_blank">rusyag.webhop.org/maps/</a>.</p>
            <p class="p">Вот так в map-файле выглядит запись о привязке пикселя к координатам</p>
            <pre class="pre codeblock">
Point01,xy,   51,   91,in, deg,  56,  0.0000,N,  35, 45.0000,E, grid,   ,           ,           ,N
</pre>
            <p class="p">Здесь указано, что пиксель <samp class="ph codeph">x=51</samp>, <samp class="ph codeph">y=91</samp>соответствует
координатам 56&deg;00’ северной широты и 35&deg;45’ восточной долготы.</p>
            <p class="p">Единственная проблема в том, что генштабовские карты привязаны
к координатам Pulkovo-42. В навигатор же следует загружать карты
с привязкой к мировым координатам WGS-84. Те же программы выполняют
автоматическую коррекцию координат. Программы считывают данные привязки
из map-файла, корректируют координаты и создают новый файл привязки <samp class="ph codeph">doc.kml</samp>.
Он имеет формат, понятный навигатору (map-файлы навигатор не понимает).</p>
            <p class="p">Другие растровые изображения требуют привязки вручную. Для этого
нужно знать градусные координаты нескольких точек и использовать
программы типа OziExplorer, Google Earth, MAPC2MAPC. Существует
много других программ для работы с картами. В их документации можно
найти сведения о привязке растровых изображений к мировым координатам.</p></div>
          <div class="section storySection">
            <h2 class="title sectiontitle">Формат растровой карты</h2>
            <p class="p">В Dakota можно загрузить не только любую генштабовскую карту,
но и вообще любой графический файл, например нарисованный от руки
план дачного участка. Важно лишь, чтобы загружаемая карта имела
формат KMZ. В действительности KMZ — это архив, созданный архиватором
Zip или 7z. Внутри архива содержатся фрагменты карты в формате <samp class="ph codeph">jpeg</samp> и
файл привязки <samp class="ph codeph">doc.kml</samp>, который связывает фрагменты
с мировыми координатам.</p>
            <div class="float-left">
              <table>
                <tbody>
                  <tr>
                    <td>
                      <a href="http://photofile.ru/photo/kapsky/115782915/middle/137484827.gif" rel="cbgroup" title="">
                        <img class="imagecenter" src="http://photofile.ru/photo/kapsky/115782915/middle/137484827.gif">
                      </a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p class="p">Деление на фрагменты позволяет навигатору быстрее отрисовывать
карту при переходе от одного места к другому. Процессоры навигаторов
не такие производительные, как графические акселераторы компьютеров,
поэтому им требуется значительное время для загрузки и отображения
растра, привязанного к координатам. Чем меньше фрагменты, на которые
разделена карта, тем быстрее навигатор загружает нужный фрагмент.</p>
            <p class="p">Максимальный размер фрагментов составляет 1024 на 1024 пикселя.
Однако, и на очень маленькие фрагменты разделять карту нельзя, так
как допустимо не более 100 фрагментов. Это ограничение относится
не к одному конкретному файлу <samp class="ph codeph">kmz</samp>, а ко всем загруженным
картам. То есть количество фрагментов во всех загруженных файлах <samp class="ph codeph">kmz</samp> в
сумме не должно превышать 100. Поэтому нужно искать компромисс между
количеством и размерами фрагментов. Кроме того, общий размер всех загруженных
файлов <samp class="ph codeph">kmz</samp> не должен превышать 32 Mb.</p>
            <p class="p">Конечно, вам не придется разрезать карту вручную. Это сделают
специальные программы, такие как Global Mapper и MAPC2MAPC. Они
же создадут файл привязки к мировым координатам и запакуют все это
в архив kmz. Подробнее об этом — в следующих разделах.</p></div>
          <div class="section storySection">
            <h2 class="title sectiontitle">Загрузка карты в навигатор</h2>
            <p class="p">Допустим, у вас есть растровая карта в виде файла с расширением <samp class="ph codeph">kmz</samp> (о
    создании <samp class="ph codeph">kmz</samp> рассказывается в следующих разделах). Загрузка карты
    заключается в простом копировании файла <samp class="ph codeph">kmz</samp> на microSD в каталог
     <samp class="ph codeph">Garmin\CustomMaps</samp>. Если этот каталог отсутствует, его создают с помощью
    файлового менеджера.</p>
            <p class="p">Также можно поместить карту в основную память навигатора в одноименный каталог. Можно даже
    записывать файлы kmz и в память, и на microSD. Однако использовать память навигатора при
    наличии microSD не рекомендуется.</p></div>
          <div class="section storySection">
            <h2 class="title sectiontitle">Включение и выключение карт</h2>
            <p class="p">Загруженные карты можно отображать или скрывать. Это позволяет выключать их для работы с
    векторной картой. К сожалению, нельзя отключать растровые карты по одной, а только все
    разом.</p>
            <p class="p">Чтобы отобразить или скрыть карты, перейдите в меню <strong class="ph b">Настройка</strong> &gt; <strong class="ph b">Карта</strong> &gt;
     <strong class="ph b">Сведения о карте</strong>. Появится список векторных и растровых карт. Выберите карту и
    нажмите <strong class="ph b">Включить</strong> или <strong class="ph b">Отключить</strong>.</p></div></div>
        <p class="toc">В этом разделе</p>
        <div class="related-links">
          <ul class="ullinks">
            <li class="link ulchildlink">
              <strong>
                <a href="dakota.maps.basecamp.html">Лучший способ: BaseCamp + SAS.Планета</a>
              </strong>
              <br></li>
            <li class="link ulchildlink">
              <strong>
                <a href="dakota.maps.sas.html">SAS.Планета</a>
              </strong>
              <br></li>
            <li class="link ulchildlink"><strong>
                <a href="dakota.maps.mapc.html">Подготовка карты в MAPC2MAPC</a>
              </strong><br>
Удобная программа для привязки и фрагментирования растровых карт</li>
            <li class="link ulchildlink"><strong>
                <a href="dakota.maps.google.html">Подготовка карты в Google Earth</a>
              </strong><br>
Визуальная привязка карт к спутниковым снимкам</li>
            <li class="link ulchildlink"><strong>
                <a href="dakota.maps.fragment.html">Фрагментирование карты, полученной в Google Earth</a>
              </strong><br>
Постобработка файла kmz в MAPC2MAPC для разбивки на фрагменты</li>
            <li class="link ulchildlink"><strong>
                <a href="dakota.maps.scale.html">Карты в разных масштабах</a>
              </strong><br>
Расположение карт одна над другой с помощью параметра drawOrder</li></ul></div></div>
      <div id="navigation_supplemental">
        <h3>Quick Navigation</h3>
        <ul id="quick_links"></ul>
        <h3>Language Links</h3>
        <ul id="inner_navigation">
          <li class="first">
            <strong>Вперед:</strong>
            <a href="dakota.mapsource.html">Векторная карта “Дороги России. ТОПО”</a>
          </li>
          <li>
            <strong>Назад:</strong>
            <a href="dakota.datum.html">Загадочный Datum и прямоугольная сетка</a>
          </li>
          <li class="last">
            <strong>Вверх:</strong>
            <a href="dakota.html">Garmin Dakota 20</a>
          </li>
        </ul>
      </div>
    </div>
    <script>if (navigator.appName.indexOf('Microsoft')==-1 && window.jstree) window.jstree.OpenTreeNode(window.pageid);</script>
  </body>
</html>